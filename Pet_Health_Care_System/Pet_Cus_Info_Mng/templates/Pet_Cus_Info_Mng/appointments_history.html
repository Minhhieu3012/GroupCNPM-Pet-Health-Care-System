{% extends "app_admin/master-page.html" %}

{%block header%}
    {% include 'includes/header.html' %}
{% endblock %}

{%block navbar%}
{% load static %}
<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar" style="background-color: #fff !important";>
  <div class="container">
    <a class="navbar-brand" href="{% url 'app_admin' %}"><span class="flaticon-pawprint-1 mr-2"></span>Pet Health Care System</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="fa fa-bars"></span> Menu
    </button>
    <div class="collapse navbar-collapse" id="ftco-nav">
      <ul class="navbar-nav ml-auto">
    <li class="nav-item"><a href="{% url 'customer_list' %}" class="nav-link">Khách Hàng</a></li>
    <li class="nav-item"><a href="{% url 'pet_list' %}" class="nav-link">Thú cưng</a></li>
    <li class="nav-item"><a href="customers.html" class="nav-link">Dịch vụ</a></li>
    <li class="nav-item"><a href="services.html" class="nav-link">Đặt lịch hẹn</a></li>
    <li class="nav-item"><a href="gallery.html" class="nav-link">Bảng giá</a></li>
    <li class="nav-item"><a href="pricing.html" class="nav-link">Đánh giá</a></li>
    <li class="nav-item"><a href="contact.html" class="nav-link">Liên hệ</a></li>
      </ul>
    </div>
  </div>
</nav>
{% endblock %}

{%block contactformsection%}

{% load static %}
<!-- Boxicons CSS -->
<link href="https://cdn.jsdelivr.net/npm/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="card">
    <h5 class="card-header">LỊCH SỬ LỊCH ĐẶT HẸN</h5>
    <div>
      {% if appointments %}
      <table class="table">
        <thead>
          <tr>
            <th>Số thứ tự</th>
            <th>Ngày</th>
            <th>Giờ</th>
            <th>Khách hàng</th>
            <th>Thú cưng</th>
            <th>Trạng thái</th>
            <th class="rounded-end-bottom">Chỉnh sửa</th>
          </tr>
        </thead>
        <tbody class="table-border-bottom-0">
              {% for appointment in appointments %} 
                <tr class="table-default">
                    <td><i></i> <span>{{item.firstName}}</span></td>
                    <td>{{item.lastName}}</td>
                    <td><i class="list-unstyled m-0 avatar-group d-flex align-items-center"></i><span>{{ forloop.counter }}</span></td>
                    <td><i class="badge bg-label-primary me-1"></i><span>{{ appointment.date }}</span></td>
                    <td><i class="badge bg-label-primary me-1"></i><span>{{ appointment.time }}</span></td>
                    <td><i class="badge bg-label-primary me-1"></i><span>{{ appointment.customer }}</span></td>
                    <td><i class="badge bg-label-primary me-1"></i><span>{{ appointment.pet }}</span></td>
                    <td class="rounded-end-bottom">  
                    </td>
                    {% if appointment.status == 'pending' %}
                      <span class="badge bg-warning">Pending</span>
                    {% elif appointment.status == 'completed' %}
                      <span class="badge bg-success">Completed</span>
                    {% endif %}
                </tbody>
              {% endfor %}
      </table>
      {% else %}
        <p>No appointments found for this customer.</p>
      {% endif %}
    </div>
    {% comment %} <a href="{% url 'add_appointment' %}" class="btn btn-primary">Add New Appointment</a> {% endcomment %}
</div>

<!-- Bootstrap JS Bundle -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}

{%block footer%}
    {% include 'includes/footer.html' %}
{% endblock %}